<% include _header.ejs %>

<div id="gallery" data-toggle="modal-gallery" data-target="#modal-gallery">
</div>
<br/>
<div id="modal-gallery" class="modal modal-gallery hide fade" tabindex="-1">
    <!--<div class="modal-header">-->
        <a class="close" data-dismiss="modal"></a>
        <!--<h3 class="modal-title"></h3>-->
    <!--</div>-->

    <div class="modal-body">
        <div class="modal-body-left" style="float: left;width: 435px ">
            <span class="modal-title"></span>
            <div class="modal-image"></div>
        </div>
        <div class="modal-body-right" style="float: left">
            <div>
                <div><span>Номер:</span></div>
                <div><span>Цена:</span></div>
            </div>
            <div class="expander">
                <em><span>Описание:</span></em>
                <div class="content">
                    <p>100% Французкий трикотаж.</p>
                    <small>
                        <ul>
                            <li>Размеры:</li>
                            <li>Размер шеи:</li>
                        </ul>
                    </small>
                </div>
            </div>
            <a class="btn btn-success modal-play modal-slideshow" data-slideshow="5000">
                <i class="icon-play icon-white" ></i>
                <span>Оформить заказ</span>
            </a>
        </div>
    </div>
    <div class="modal-footer">
        <!--<a class="btn modal-download" target="_blank">-->
            <!--<i class="icon-download"></i>-->
            <!--<span>Download</span>-->
        <!--</a>-->
        <!--<a class="btn btn-success modal-play modal-slideshow" data-slideshow="5000">-->
            <!--<i class="icon-play icon-white"></i>-->
            <!--<span>Slideshow</span>-->
        <!--</a>-->
        <a class="btn btn-info modal-prev">
            <i class="icon-arrow-left icon-white"></i>
            <span>Previous</span>
        </a>
        <a class="btn btn-primary modal-next">
            <span>Next</span>
            <i class="icon-arrow-right icon-white"></i>
        </a>
    </div>
</div>

<% include _scripts.ejs %>

<script src="/js/load-image.min.js"></script>
<script src="/js/bootstrap-image-gallery.js"></script>

<script type="text/javascript">
    function init(){
//        $('#raty img').mouseover(function(){ );
//        }).(function(){  });
    }

    function estimateSelect(ibow,index){
        changeStarImage(ibow,index,'/img/star-on.png');
    }
    function estimateUnselect(ibow,index){
        changeStarImage(ibow,index,'/img/star-off.png');
    }

    function changeStarImage(ibow,index,isSelect){
        var src1 = getStartImage(isSelect);
        var src2 = getStartImage(!isSelect);
        var tag = $('div#raty-'+ibow+' img[alt='+index+']');
        var count = parseInt(tag.attr('alt'));
        for(var i=1;i < 6; ++i){
            $('div#raty-'+ibow+' img[alt='+i+']').attr('src',i <= count ? src1 : src2);
        }
    }
    function getStartImage(isSelect){
        return isSelect ? '/img/star-on.png' : '/img/star-off.png';
    }


    $(function () {
        'use strict';


        // Start slideshow button:
        $('#start-slideshow').button().click(function () {
            var options = $(this).data(),
                    modal = $(options.target),
                    data = modal.data('modal');
            if (data) {
                $.extend(data.options, options);
            } else {
                options = $.extend(modal.data(), options);
            }
            modal.find('.modal-slideshow').find('i')
                    .removeClass('icon-play')
                    .addClass('icon-pause');
            modal.modal(options);
        });

        // Toggle fullscreen button:
        $('#toggle-fullscreen').button().click(function () {
            var button = $(this),
                    root = document.documentElement;
            if (!button.hasClass('active')) {
                $('#modal-gallery').addClass('modal-fullscreen');
                if (root.webkitRequestFullScreen) {
                    root.webkitRequestFullScreen(
                            window.Element.ALLOW_KEYBOARD_INPUT
                    );
                } else if (root.mozRequestFullScreen) {
                    root.mozRequestFullScreen();
                }
            } else {
                $('#modal-gallery').removeClass('modal-fullscreen');
                (document.webkitCancelFullScreen ||
                        document.mozCancelFullScreen ||
                        $.noop).apply(document);
            }
        });


//        function estim(index,iRaty){
//            var tag = '<div id="raty-'+index+'" class="estimate" data-rating="2.9779" style="display: inline; cursor: pointer">';
//            for(var i=1;i<6;++i){
//                tag += '<img src="/img/star-'+ (i <= iRaty ? 'on' : 'off')
//                        +'.png" alt="'+i+'" title="bad" onmouseover="estimateSelect('+index+','+i+
//                        ')" onmouseout="estimateUnselect('+index+','+i+')">&nbsp;';
//            }
//            tag += '<input type="hidden" name="score" value="2.9779"></div>';
//            return tag;
//        }
//
//        // Load images via flickr for demonstration purposes:
//        $.ajax({ url: 'api/getOdessaImages', dataType: 'json'}).done(function (data) {
//            var product = $('#gallery');
//            var index = 1;
//            $.each(data, function (index, photo) {
//                $('<div class="thumbnail product-item"></div>').append(
//
//                        $('<a data-gallery="gallery"/>')
//                            // .append('<div class="label label-info price">€ 10,<sup>99</sup></div>')
//                                .append($('<img  style="vertical-align: baseline">').prop('src', photo.imgPath))//
//                                .prop('href', photo.imgPath)
//                                .prop('title', photo.title)
//
//                )
//                .append('<div class="caption"><p>' + photo.title+'</p>'+estim(index, photo.iRaty)+
//                        '<span class="label label-info price pull-right">'+photo.price+' грн.</span></div>')
//                .appendTo(product);
//                ++index;
//            });
//        });
    });


</script>

<% include _footer.ejs %>

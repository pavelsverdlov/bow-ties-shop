<% include _header.ejs %>

<div id="gallery" data-toggle="modal-gallery" data-target="#modal-gallery">

</div>
<br/>
<div id="modal-gallery" class="modal modal-gallery hide fade" tabindex="-1">
    <div class="modal-header">
        <a class="close" data-dismiss="modal">×</a>
        <h3 class="modal-title"></h3>
    </div>
    <div class="modal-body"><div class="modal-image"></div></div>
    <div class="modal-footer">
        <a class="btn modal-download" target="_blank">
            <i class="icon-download"></i>
            <span>Download</span>
        </a>
        <a class="btn btn-success modal-play modal-slideshow" data-slideshow="5000">
            <i class="icon-play icon-white"></i>
            <span>Slideshow</span>
        </a>
        <a class="btn btn-info modal-prev">
            <i class="icon-arrow-left icon-white"></i>
            <span>Previous</span>
        </a>
        <a class="btn btn-primary modal-next">
            <span>Next</span>
            <i class="icon-arrow-right icon-white"></i>
        </a>
    </div>
</div>

<% include _scripts.ejs %>

<script src="/js/load-image.min.js"></script>
<script src="/js/bootstrap-image-gallery.min.js"></script>

<script type="text/javascript">
    function init(){

    }
    $(function () {
        'use strict';

        // Start slideshow button:
        $('#start-slideshow').button().click(function () {
            var options = $(this).data(),
                    modal = $(options.target),
                    data = modal.data('modal');
            if (data) {
                $.extend(data.options, options);
            } else {
                options = $.extend(modal.data(), options);
            }
            modal.find('.modal-slideshow').find('i')
                    .removeClass('icon-play')
                    .addClass('icon-pause');
            modal.modal(options);
        });

        // Toggle fullscreen button:
        $('#toggle-fullscreen').button().click(function () {
            var button = $(this),
                    root = document.documentElement;
            if (!button.hasClass('active')) {
                $('#modal-gallery').addClass('modal-fullscreen');
                if (root.webkitRequestFullScreen) {
                    root.webkitRequestFullScreen(
                            window.Element.ALLOW_KEYBOARD_INPUT
                    );
                } else if (root.mozRequestFullScreen) {
                    root.mozRequestFullScreen();
                }
            } else {
                $('#modal-gallery').removeClass('modal-fullscreen');
                (document.webkitCancelFullScreen ||
                        document.mozCancelFullScreen ||
                        $.noop).apply(document);
            }
        });

        // Load images via flickr for demonstration purposes:
        $.ajax({ url: 'api/getOdessaImages', dataType: 'json'}).done(function (data) {
            var product = $('#gallery');
            $.each(data, function (index, photo) {
                $('<div class="thumbnail product-item"></div>').append(

                $('<a data-gallery="gallery"/>')
                       // .append('<div class="label label-info price">€ 10,<sup>99</sup></div>')
                        .append($('<img  style="vertical-align: baseline">').prop('src', photo.path))//width="200px" height="200px"
                        .prop('href', photo.path)
                        .prop('title', photo.title)

                )
                .append('<div class="caption"><p>' + photo.title+'</p><span class="label label-info price pull-right">€ 10,99</span></div>')
                .appendTo(product);
            });
        });
    });

</script>

<% include _footer.ejs %>
